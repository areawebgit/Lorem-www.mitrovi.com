(function(A){if (!Array.prototype.forEach) A.forEach=A.forEach || function(action, that){for (var i=0, l=this.length;i < l;i++) if (i in this) action.call(that, this[i], i, this);};})(Array.prototype);var telefono_val=$('#marker_portali_telefono_portali').val();var location_latitude_val=$('#marker_portali_latitudine_portali').val();var location_longitude_val=$('#marker_portali_longitudine_portali').val();var map_image_url_val=$('#marker_portali_img').val();var name_point_val=$('#marker_portali_nome_portali').val();if(jQuery.browser.mobile){var description_point_val=$('#marker_portali_indirizzo_portali').val() + '<br />' + '<a class="mobile" style="color:#f87500;" href="tel:'+telefono_val+'">Telefono: '+telefono_val+'</a>' + '<span class="nomobile" style="color:#f87500;display:none;">Telefono:'+telefono_val+'</span>';}else{var description_point_val=$('#marker_portali_indirizzo_portali').val() + '<br />' + '<a class="mobile" style="color:#f87500;display:none;" href="tel:'+telefono_val+'">Telefono:'+telefono_val+'</a>' + '<span class="nomobile" style="color:#f87500;">Telefono:'+telefono_val+'</span>';} var mapObject, markers=[], markersData={'Contact':[{name:name_point_val, location_latitude:location_latitude_val, location_longitude:location_longitude_val, map_image_url:map_image_url_val, name_point:name_point_val, description_point:description_point_val, url_point:'' } ] };var mapOptions={zoom:14, center:new google.maps.LatLng(location_latitude_val, location_longitude_val), mapTypeId:google.maps.MapTypeId.ROADMAP, mapTypeControl:false, mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU, position:google.maps.ControlPosition.LEFT_CENTER }, panControl:false, panControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT }, zoomControl:true, zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE, position:google.maps.ControlPosition.TOP_RIGHT }, scrollwheel:false, draggable:false, scaleControl:false, scaleControlOptions:{position:google.maps.ControlPosition.TOP_LEFT }, streetViewControl:true, streetViewControlOptions:{position:google.maps.ControlPosition.LEFT_TOP }, styles:[] };var marker;mapObject=new google.maps.Map(document.getElementById('map_contact'), mapOptions);for (var key in markersData) markersData[key].forEach(function (item){marker=new google.maps.Marker({position:new google.maps.LatLng(item.location_latitude, item.location_longitude), map:mapObject, icon:'/img/pins/' + key + '.png', });if ('undefined'===typeof markers[key]) markers[key]=[];markers[key].push(marker);google.maps.event.addListener(marker, 'click', (function (){closeInfoBox();getInfoBox(item).open(mapObject, this);mapObject.setCenter(new google.maps.LatLng(item.location_latitude, item.location_longitude));}));});function hideAllMarkers (){for (var key in markers) markers[key].forEach(function (marker){marker.setMap(null);});};function closeInfoBox(){$('div.infoBox').remove();};function getInfoBox(item){var contenuto_content='<div class="marker_info" id="marker_info">' + '<h3>'+ item.name_point +'</h3>' + '<span>'+ item.description_point +'</span>' + '</div>';return new InfoBox({content:contenuto_content, disableAutoPan:true, maxWidth:0, pixelOffset:new google.maps.Size(40, -190), closeBoxMargin:'110% 5px 2px 2px', closeBoxURL:"http://www.google.com/intl/en_us/mapfiles/close.gif", isHidden:false, pane:'floatPane', enableEventPropagation:false });};